(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();class l{round=0}class m{constructor(t){this.initialState=t}async simulate(t,o,n){if(n?.aborted)throw new u("Simulation aborted");let e=structuredClone(this.initialState);for(e.round=0,await o?.(e);t(e);){if(n?.aborted)throw new u("Simulation aborted");const r=this.update(e);r.round=e.round+1,e=r,await o?.(e)}return e}async simulateWithHistory(t,o,n){const e=[],r=async i=>{if(n?.aborted)throw new u("Simulation aborted");e.push(i),await o?.(i)};return await this.simulate(t,r,n),e}}class u extends Error{constructor(t="Aborted"){super(t),this.name="AbortError"}}class f extends l{value;constructor(t=0){super(),this.value=t}}class p extends m{constructor(t,o){super(t),this.step=o}update(t){const o=structuredClone(t);return o.value+=this.step,o}}document.getElementById("paramForm")?.addEventListener("submit",async function(s){s.preventDefault();const t=parseFloat(document.getElementById("initValue").value),o=parseFloat(document.getElementById("step").value),n=parseInt(document.getElementById("rounds").value,10),e=document.getElementById("resultTable")?.querySelector("tbody");if(!e||isNaN(t)||isNaN(o)||isNaN(n))return;e.innerHTML="";const r=new f(t);await new p(r,o).simulateWithHistory(a=>a.round<n,async a=>{const c=document.createElement("tr");c.innerHTML=`<td>${a.round}</td><td>${a.value.toFixed(2)}</td>`,e.appendChild(c),await new Promise(d=>setTimeout(d,10))})});
